import telnetlib
import time
import numpy as np

def transformMultisUnityToTroffer(listMultis):
    # Scale the multis to 0-4095 and round to integers
    listIntMultis = [round((4095*i), 0) for i in listMultis]
    array = np.array(listIntMultis)
    # Splitting the array into two parts
    edgeMultis = array[:4]
    edgeMultisTransform = np.array([edgeMultis[2], edgeMultis[0], edgeMultis[1], edgeMultis[3]])
    # edgeMultisTransform = np.array([0,0,0,0])
    print(edgeMultisTransform)
    pixelMultis = array[4:]
    pixelMatrix = pixelMultis.reshape((7, 7))
    pixelMatrix = np.flip(pixelMatrix, axis=0)  # Flip the pixel matrix upside down
    print(pixelMatrix)
    mergedMultis = np.concatenate((edgeMultisTransform, pixelMatrix.flatten()), axis=0)
    mergedMultisList = mergedMultis.tolist()  # Flatten the matrix to a list
    return mergedMultisList

# Telnet server IP address and port number
HOST = ["192.168.0.80", "192.168.0.81", "192.168.0.61", "192.168.0.57"]
PORT = 23  # Telnet server port number

# Connect to Telnet servers
# tn1Right = telnetlib.Telnet(HOST[0], PORT)
# tn1Left = telnetlib.Telnet(HOST[1], PORT)
tn2Right = telnetlib.Telnet(HOST[2], PORT)
tn2Left = telnetlib.Telnet(HOST[3], PORT)

start_time = time.perf_counter()  # Record the start time

smoother = 200  # To control how smooth the trasnsition is

# Baseline - 414, 500
# Troffer Number - Active Power, Apparent Power
# 8 - 459, 528
# arrayBlackboard2 = [0.0,0.0,0.0,0.4295250957791621,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.05061579578978903,0.12726663700989133,0.5151868856098223,0.0,0.0,0.0,0.0,0.2961072136481161,0.28550356246407566,0.18718553958980771,0.7489847834464022,0.0]
# 7 - 462, 540
# arrayBlackboard2 = [0.04698177834015674,2.168404344971009e-19,0.0,0.43003065168039434,0.0,0.0,0.0,0.0,0.0,1.1102230246251565e-16,-2.220446049250313e-16,0.0,0.0,0.0,0.0,0.0,0.0,5.551115123125783e-17,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.6007226791140322,0.07972865421762429,0.20142562124701385,-8.673617379884035e-18,0.0,0.0,0.8978672465379832,0.029630949288360145,0.3447596422702034,0.21995169915847085,0.0,0.0]
# 6 - 421, 505
# arrayBlackboard2 = [0.18381489540341442,0.054874512755687666,0.014544227815810828,0.0,1.3877787807814457e-17,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.01134377488615998,0.002095577459893097,0.0,0.0,0.0,0.024276899912721084,0.0,0.06835184608600535,0.005700467850424051,0.0,0.0,0.0,0.0,-8.673617379884035e-19,0.0675146525575974,0.0,0.0,0.0,0.0,0.0,0.0,0.055847571105739485,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0037779731774918446,0.0,0.0,2.220446049250313e-16,0.0,-1.1102230246251565e-16,0.0,0.0,0.0]
# 5 - 421, 505
# arrayBlackboard2 = [0.21682362778026087,0.0151294133313567,0.05743512482105945,0.020513178706147023,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.006374854049306933,0.0,0.0,0.0,0.0,0.0,0.0,0.03993380438121683,-4.336808689942018e-19,0.0,0.005808150514857856,0.0,0.0,0.0,1.3552527156068805e-20,0.055561217479152644,0.0,0.0,0.0,0.0,0.0,0.010416929025757707,0.07603130362953155,0.0,0.0,0.0,0.0,0.0,0.0007154631958076613,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0]
# 4 - 421, 508
# arrayBlackboard2 = [0.06689161748218517,0.21274793408467346,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.05625549168404223,0.0,0.0,0.0,0.0,0.0,0.0,0.022858097230729554,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.09348260464597469,0.006793798429199929,0.0,0.0,0.0,0.0,0.010655494238841351,0.06916585813329737,0.02960262856485453,0.0,0.0,0.0,0.0,0.0,0.028897922377569746,0.0893248410227337,0.0,0.0]
# 3 - 427, 511
# arrayBlackboard2 = [0.05573693312169058,-8.673617379884035e-19,0.23582065520810946,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.05026168717314994,0.0,0.0,0.0,0.0,0.0,0.0,0.01741158589072552,0.0,0.0,0.0,0.0,0.0,0.0,0.07612018757174877,0.0,0.0,0.0,0.0,0.0,0.05771980839034728,0.09800856930609757,0.0,0.0,-2.0816681711721685e-17,0.0,0.0,0.15367358361156663,0.0354798157651865,0.0798496737050521,0.0,0.00012083676475985183]
# 2 - 429, 512
# arrayBlackboard2 = [0.019456141700649854,0.0,0.09116660871792429,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.023608843665520747,0.0,0.0,0.0,0.0,0.0,0.006842414974242393,0.024475892469968133,0.0,0.0,0.01686940742269412,0.08577964758981582,0.05089162557252529,0.12772486695744212,0.0,0.10799111765512653,0.0,0.0,0.007440133948572812,0.0,0.0,0.0,0.017827985626774158,0.0,0.0,0.0,8.131516293641283e-20,0.04817068606159637,0.0,0.0634849072146923,0.0,0.0,0.0,0.0,0.024767617756135236,0.0,0.16123314403609043,0.0,0.0,1.1102230246251565e-16,-2.168404344971009e-18,0.0,0.0]
# 1 - 432, 515
# arrayBlackboard2 = [0.01477673374483983,0.10199059492488727,0.0,0.0,0.011413837872905397,0.0,0.0,0.0,0.0,0.0,0.0,0.027582785751784633,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.16387090131836696,0.00837577752029614,0.09413712705146632,0.009824281597127893,0.0,0.0,0.0,0.005543652932816279,0.0,0.012366475251039087,0.0,0.0,0.1440416970308288,0.0,0.08967876559308144,0.0,0.0,0.0,0.0,0.042594660056562345,0.0,0.030147955666487987,2.7755575615628914e-17,0.0,0.0,0.0,0.07478382795607862,0.0,0.0268351482567682,-5.204170427930421e-18,-1.1102230246251565e-16,0.0,0.0,0.18543849197714418]

# 8 - 522, 594
# arraySetForget2 = [0.2096443845704729,0.0,0.5331483185146028,0.16988259478248596,1.0,-1.1102230246251565e-16,0.0,1.1102230246251565e-16,0.0,0.31038848156491033,0.0,0.15990823697676837,0.0,0.0,0.0,0.0,0.016010056560364805,0.0,0.5909762179133522,0.0,1.1102230246251565e-16,0.0,0.0,0.3475878485292129,0.0,0.35331718232046894,0.0,0.0,0.0,0.0,0.01396522737045941,0.0,0.7844120589223422,0.0,0.2423408075973112,0.3276653848296086,0.0,0.3461928865830159,0.0,-6.938893903907228e-17,0.0,0.0,0.023921249086023666,0.14243757884844954,0.3791950639412438,0.01192923335379617,0.0,0.0,0.0,0.0,0.0,0.0,0.4347969896848071]
# 7 - 546, 616
# arraySetForget2 = [0.3170193408820132,0.5896602295845403,0.0,0.13498011252268072,-1.734723475976807e-18,0.49856180821099805,0.0,0.0,1.1102230246251565e-16,0.0,1.0,0.0,0.3441926525821332,0.0,0.0,0.0,0.0,0.7785891163428466,0.0,0.382991213002153,0.0,0.0,0.0,0.0,0.4489916633328366,0.0,0.15863115231078934,0.0,0.0,0.0,0.0,0.6502339205598788,0.0,0.4661031965152431,2.0816681711721685e-17,0.17967862786418945,0.0,0.0,0.8128336613697471,0.11786156226830694,0.3422220200395244,0.11572026946608394,0.013711234136760675,0.0,0.0,3.469446951953614e-18,0.3567275111773847,0.0,0.0,0.0,0.0,5.551115123125783e-17,0.0]
# 6 - 462, 542
# arraySetForget2 = [0.7362553001921635,0.8205406426028219,-2.8189256484623115e-18,0.6/206320189114591,0.0,0.0,0.0,-3.469446951953614e-18,0.0,0.0,0.0,0.0,0.0,0.04197367007750484,-3.469446951953614e-18,0.31026588665544214,0.0,0.0,0.0,0.0,0.020841008930204907,0.5547756779140248,0.1950280126436731,0.0,0.0,0.0,0.0,0.0,0.187663971234642,1.734723475976807e-18,0.01479833027710209,0.0,0.0,0.0,0.0,0.5210099788979152,0.0,0.012826450087673469,0.0,0.0,0.0,0.0,0.0,0.0,1.6653345369377348e-16,0.0,2.7755575615628914e-17,0.0,0.0,0.0,0.0,0.0,0.0]
# 5 -  475, 552
# arraySetForget2 = [0.852112958903916,0.0,1.0,0.5756808151012913,0.0,0.0,0.0,0.0,0.0,0.0,3.469446951953614e-18,0.0,0.030643721926734924,0.23843866237931094,0.0,0.0690368045030253,0.0,-1.3877787807814457e-17,0.0,0.08621976326694519,0.1300238692910894,0.340688634959664,0.13525633169299683,0.0,-5.551115123125783e-17,0.0,0.050406630490132054,0.0,0.2998304057198246,0.0,0.0,0.0,0.0,0.05039641648446655,0.0,0.6501821182775274,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,6.938893903907228e-18,0.0,0.0,2.7755575615628914e-17]
# 4 - 469, 546
# arraySetForget2 = [0.5202842972732165,0.9721868172612563,2.6020852139652106e-18,0.6648926302979558,6.938893903907228e-18,0.0,-1.1102230246251565e-16,-5.551115123125783e-17,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.5314648103545511,0.0,0.006294331133311931,0.0,0.0,0.0,0.0,0.20704137625579716,0.021650046451864344,2.168404344971009e-19,0.0,0.0,0.0,-1.3877787807814457e-17,0.5725057291560537,0.18878511980791704,0.0,0.0,2.7755575615628914e-17,0.0,0.10108943180770852,0.0,0.26459906494680147,0.0,0.0,-6.245004513516506e-17,0.0,0.0,6.938893903907228e-18,0.0,0.0,0.0]
# 3 - 476, 552
# arraySetForget2 = [0.4292308765470192,5.204170427930421e-18,1.0,0.7907007985750341,0.0,0.0,0.0,0.13149219471611626,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-9.71445146547012e-17,0.0,0.0,0.0,0.5465658662736164,0.0,0.0,-1.1102230246251565e-16,0.0,0.02681824021753043,0.0,0.18349658142101005,0.019383177604298585,0.0,0.0,0.0,0.028136697741606653,0.04854214981791749,0.5851521797124292,0.0,0.0,0.0,0.0,0.0,0.367219343669445,0.11847620535417927,0.13573634857267672,0.0,0.0,0.0,0.0,0.05842026605285319,-6.938893903907228e-18,0.0,0.0,0.0]
# 2 - 509, 582
# arraySetForget2 = [0.08351486063416264,0.0,0.5227753472161999,0.1661176489698068,0.0,0.0,0.0,0.0,0.0,0.0,0.15194433974872995,-5.551115123125783e-17,0.0,0.0,0.0,0.0,0.0,0.14705125002826283,0.0003907594110741097,0.0,0.030084705002410617,0.47657426586706486,0.3710214675237178,0.7978196584528136,0.0,0.6570757486604353,0.0,0.0,0.0,0.0,0.0,0.0,0.1812269776626683,0.0,0.0,0.0,0.0,0.29697861186047086,0.0,0.4480294924329522,0.0,1.1102230246251565e-16,1.1102230246251565e-16,0.0,0.11864345317739663,0.0,0.8723338512552037,0.0,0.0,0.0,0.0,0.3185772858951077,0.0]
# 1 - 532, 603
# arraySetForget2 = [0.003565386534444588,0.554453873060202,0.0,0.55534595014336,0.0774860693836481,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.16107176839889378,0.0,0.0,0.0,0.0,0.0,-1.3877787807814457e-17,0.0,1.0,0.08223256603130556,0.5371320072894401,0.1115707562073176,0.0,0.0,0.0,0.015758988257637496,0.0,0.013138886206008976,0.0,0.0,0.8449497434747089,0.0,0.5966161368132286,0.0,0.0,-1.1102230246251565e-16,0.0,0.4787188039476727,0.0,0.17764259515482053,0.0,1.1102230246251565e-16,1.1102230246251565e-16,0.0,0.6361836751017371,-1.734723475976807e-18,0.4495343369540576,0.0,-1.1102230246251565e-16,0.0,-1.1102230246251565e-16,0.7767539820982288]

# 8 - 456, 536
# arrayWestWall2 = [0.0,0.0,0.7108561749846084,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,1.3877787807814457e-17,0.0,0.0,0.0,0.0,0.0,0.0,0.4865336206656893,0.07131666293980132,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.12663455843317584,0.1453631610414208,0.0,0.0,0.0,0.0,0.0,0.7535805947216534,5.204170427930421e-18,0.0,0.0,0.0,0.0,0.0,0.08856333152324222,0.3071940585311371,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
# 7 - 420, 505
# arrayWestWall2 = [0.0,0.0,0.5141281105140175,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.07086555582875312,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,2.220446049250313e-16,0.0,0.0,0.016293349714350154,-2.220446049250313e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
# 6 - 451, 532
# arrayWestWall2 = [0.42590468705336987,0.0,0.28680794430093487,2.220446049250313e-16,0.0,0.0,0.0,0.0,0.0,0.2937062275117826,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.03643924796292178,0.33119856111155155,0.0,0.0,0.0,0.0,0.0,0.0,0.17575322641910782,0.0,0.0,0.0,0.0,0.0,0.0,0.21494340748601545,0.0,0.0,0.0,0.0,0.0,0.0,0.1272989397302129,0.0,0.0,0.0,0.0,0.0,0.0,0.32450640340048786,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.12863043439881164,0.0]
# 5 - 423, 509
# arrayWestWall2 = [0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,-2.220446049250313e-16,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
# 4 - 452, 533
# arrayWestWall2 = [0.0,0.0,0.30305547317337905,0.2765043215660381,0.0,0.0,0.0,0.0,0.0,0.15481172783091443,0.0,0.0,0.0,0.0,0.0,0.0,0.3795089742023457,0.0,0.0,0.0,0.0,0.0,0.0,0.1567160799850168,0.0,0.0,0.0,0.0,0.0,2.7755575615628914e-17,0.2200505531235586,0.0,0.0,0.0,0.0,0.0,0.034722240121440096,0.18918052647774983,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.29607080520781986,0.0,-1.1102230246251565e-16,0.0,0.0,-1.1102230246251565e-16,-1.3877787807814457e-17,0.34311119551455643,0.0]
# 3 - 423, 509
# arrayWestWall2 = [0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]
# 2 - 456, 536
# arrayWestWall2 = [0.0,0.0,0.6919598667231307,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,1.1102230246251565e-16,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-8.326672684688674e-17,0.0,0.0,0.0,0.0,0.0,0.7590477868615082,0.31550993306633107,0.0,0.0,0.0,0.0,0.0,0.16657824133163,0.08874185347012631,0.0,-2.220446049250313e-16,0.0,0.0,0.0,0.35078549863324865,0.2560652471627737,0.0,0.0,0.0,0.0,0.0,4.85722573273506e-17,0.0]
# 1 - 420, 506
# arrayWestWall2 = [0.0,0.0,0.14664394052378915,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,9.71445146547012e-17,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.24921638589709433]

# arrayTable2 = [0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.044624676730777926,0.0,1.1102230246251565e-16,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0]

# 8 - 438, 521
# arrayTableTRF2 = [1.1338067667421642e-27,0.00380523228855305,0.08585274522876679,0.022865102015782394,3.3760652087285995e-26,1.2866449576381492e-27,0.2703278933069989,7.490980279587183e-27,1.6897713472208682e-28,6.488208049831062e-27,1.6213023904062083e-27,2.8270173146753723e-23,1.7265657386957842e-26,0.056316107857367875,4.995197972097473e-26,1.6603702229897543e-27,2.118746502210828e-25,3.079204433579853e-27,6.129732008908431e-26,9.473768147184102e-27,0.5717005290669344,1.1857010787871455e-26,2.025802958788526e-27,0.05607617608314063,1.763267062746177e-28,9.54196941256143e-26,2.3054436629984766e-27,5.340417184127033e-28,6.222514088254128e-28,5.019324727827685e-28,0.04068880595790465,2.887799237576462e-28,6.294755758067751e-20,3.3524595618798273e-26,1.7072584957567857e-27,2.2021508101067882e-27,7.76683564109438e-30,0.11953665212862634,3.466056556242398e-28,2.202179906119284e-27,5.636930983894515e-26,2.9970017564350243e-25,4.552063810683594e-25,0.04782193881885238,0.068191868601349,4.256377400902809e-27,5.843415303773261e-28,9.949451796092094e-28,8.86458369722357e-28,5.7746408481005775e-28,3.3586458952207174e-28,4.060538085980319e-28,0.02977859386015899]
# 7 - 447, 530
# arrayTableTRF2 = [2.1784516020609194e-27,0.07826565468007092,1.3765408759979368e-27,0.00916849392192857,9.659118170106254e-26,1.822849158714278e-24,4.9209471320300815e-28,1.9661322801279487e-26,0.37298023723301765,6.360976142119373e-27,2.3854816416408666e-26,8.258826483025973e-24,6.621661150083889e-05,3.1762513772896123e-27,1.9844454672483611e-26,0.45143202803478155,5.23685800233673e-27,3.6943003158764235e-26,1.3745738364597685e-30,0.06924983486283676,1.3857244050925433e-28,2.717343356818243e-28,0.687594579936755,9.904932842080234e-27,1.0735217394194107e-25,1.1826650969796014e-29,0.010849564575548315,9.664332105236816e-28,1.8062344097315618e-28,1.4594775562390176e-28,3.1591968936485356e-28,4.115817065186345e-26,1.217624518441525e-29,0.14310798351275614,2.7569265143720093e-26,5.12926277919516e-27,6.998258641057628e-27,1.1873954643317657e-27,0.012822797426295551,1.6096744358524558e-27,0.049232972063666856,7.583221133536846e-26,8.564049772009159e-26,3.2101798073345415e-26,4.1904884894564826e-26,1.2649853002227755e-27,2.2354853887775152e-23,1.0078785867434748e-27,1.9629463486869232e-28,2.0908866360545468e-28,9.654941117484746e-28,1.4590806940500598e-27,2.125340404582388e-27]
# 6 - 458, 539
# arrayTableTRF2 = [0.03431882963908138,1.0770715049848085e-23,6.1114061341593176e-30,0.03825196565568944,3.105055061467497e-27,1.8901090413322384e-26,2.3434172580269908e-26,6.211943649055215e-28,2.9664197357588314e-28,5.768062252740918e-28,3.360558659554907e-28,6.42323200234419e-28,0.25816176566338866,0.305827986178391,1.369266435610683e-28,1.9762333305423494e-28,4.539269916648022e-28,1.156728122549038e-28,2.703096791358898e-27,0.5105573728012023,0.09121887840045984,5.829391121736792e-29,3.0419901553273973e-28,1.5266615735872091e-28,1.0798346171515651e-28,1.7054188397802964e-26,0.5435679622084008,0.07024307264182225,4.788735216563851e-28,3.780203203120627e-28,1.1364687423396551e-28,5.922988735979025e-29,1.1811922989914634e-26,0.36949826124297336,0.23091127021388022,1.2498255828043336e-28,5.650928567382309e-28,1.5279367825671115e-28,7.862940846444612e-29,7.846395816978516e-27,9.213277722659123e-26,1.554070505964769e-24,1.1252730764770007e-27,1.7072568603443926e-27,2.6503199920274987e-28,8.591649996675464e-29,1.4104942653896487e-26,2.6379891093020505e-25,1.524498688026727e-26,3.2002420758493668e-28,1.217249401948111e-27,3.144406077963486e-28,1.7439917599238478e-28]
# 5 - 442, 525
# arrayTableTRF2 = [0.08342426597339293,5.966135556437213e-30,8.705055227232021e-28,0.12348662331083593,4.793062260493054e-28,3.047629216241317e-27,1.2321904739055106e-27,1.4696585283838509e-27,8.495012688934625e-25,9.185600722952029e-26,7.370366928823886e-27,3.345435139031154e-28,1.3994042247438553e-31,5.752398510219583e-28,7.52467086564439e-29,0.27870541749743993,0.16442834570831222,3.1473903283411612e-27,1.5792119627516724e-28,1.04539347571498e-28,4.294312574796198e-28,2.7030684099588056e-28,0.09246843701505991,0.4239089316971664,6.008397316764383e-28,9.662728130543861e-29,1.1769466010122447e-27,3.5081547343102856e-27,1.0700071265714347e-27,0.06722462235545837,0.08956637263474103,6.4269636811951694e-27,1.0642861762188932e-28,1.2980718434132309e-25,1.4247831914882782e-26,1.6165804958968366e-27,0.12693646970463587,1.0315570689534333e-29,6.129126332251527e-27,1.7076873167953848e-28,1.933608650476309e-25,7.699185069042115e-27,1.0794801734506136e-27,0.12171031074063668,6.196005162558028e-26,3.0851701109999575e-26,2.2454165913849015e-28,1.7443941490212876e-27,3.685892817347813e-27,1.099025664315103e-27,2.048550151949471e-14,0.041893736850013026,2.71878191915525e-26]
# 4 - 459, 540
# arrayTableTRF2 = [0.02586535058788548,3.972724186223407e-25,5.294804595058109e-31,1.0468793853022523e-16,3.476193129345527e-27,2.3108536238820145e-26,2.8923863806221746e-27,8.305500211583534e-28,9.082719535444203e-28,3.2979218496230184e-28,1.8425381695892397e-28,1.1596061990061338e-27,1.754943790228039e-26,3.0620521090770788e-27,8.951085789431124e-28,3.9095707240954295e-28,1.8617291109362454e-28,8.204529639751103e-29,2.7185389885187083e-27,0.3648423842360695,0.20809822490995217,2.2670559882088658e-28,1.7673196686378022e-28,1.0260049184347467e-28,4.3969584335973844e-29,5.65006751245122e-28,0.46547363203276776,0.09331265309524828,2.4931796931226666e-28,1.1509924721018507e-28,8.235392299657722e-29,5.331974616713108e-29,1.6920469790836263e-27,0.581683389161211,3.9363339401219964e-16,2.937397252888614e-28,1.1621285319035637e-28,1.0596116204025186e-28,4.857422121938911e-29,3.6771295144385766e-27,0.4206798871178429,0.32232476036396784,1.2013371985639196e-28,1.6239182739254e-28,3.3392424088463145e-28,1.1905682796638362e-28,5.991394179110341e-27,7.776565154523059e-27,1.5602646011268545e-26,4.460390915561738e-28,3.3771352834659267e-28,7.861232221772811e-28,3.6239684773220016e-28]
# 3 - 442, 525
# arrayTableTRF2 = [0.11312085149294114,4.5295397563220264e-30,3.567917856884089e-28,0.09095790598869494,2.648012576006784e-28,6.144287702353313e-28,8.326170899881744e-28,5.914527448780829e-28,0.07296351137616999,0.0710872458770452,1.421044475893016e-26,2.860175501236389e-28,2.9009414337045354e-27,5.827808631355722e-28,1.1952000341307557e-27,0.12148560910131574,7.679925123057542e-26,7.548781035312412e-27,1.9496389935454441e-28,1.4934123755465457e-27,4.072903119402628e-28,8.333285419690414e-28,0.15143959764509587,1.8097383653825374e-27,7.109111093029564e-28,1.7617476585681752e-28,1.0175272615240956e-27,2.9399184769613245e-28,9.088556918396113e-29,0.04905538695604582,0.20874192622988733,2.5798183786818563e-27,1.8080172520163075e-28,2.0635417896430313e-27,2.3787683481497267e-28,1.126044982868674e-28,0.05522036645311771,0.42947286449636624,3.361341591660413e-27,1.641344488780893e-28,2.9846634853341433e-27,2.872419736186618e-28,7.081038587645471e-29,0.23403570822555764,9.613923574810696e-37,3.7355635562372216e-28,1.2960076979318307e-28,9.548200857950701e-28,9.547243784967617e-28,1.4410010686857828e-27,2.8256425219076945e-26,1.5249996121925672e-26,7.386840045003022e-28]
# 2 - 440, 523
# arrayTableTRF2 = [2.2882119619113545e-27,1.0811182463435576e-26,0.08304641165361272,1.9539804880294744e-27,5.724513723223833e-28,5.119652686337308e-28,2.478293021530374e-28,1.370826739123628e-28,2.230791640465372e-28,7.6967646584770525e-28,7.216860985978084e-27,1.3119954440417078e-27,1.4015622575259965e-27,2.371405450161004e-28,5.083675377166761e-28,3.9317708483285937e-28,5.809737242705067e-42,4.761553519200881e-26,9.11634483646563e-28,1.0753596884995795e-27,7.587640582445727e-28,5.2082380760322245e-28,0.009942274845595058,0.15937338774573442,3.670316599806157e-29,5.1200868275751765e-27,2.024920970859749e-27,4.318107299257726e-28,9.771116250632874e-29,4.250991749437578e-28,0.03353152580457587,7.387192306629402e-29,1.2242239745875196e-27,2.349468091180148e-27,0.5417354486574761,1.4051385243808928e-29,1.0078445323841354e-27,0.043988706683410664,9.221475136203763e-29,3.2827881105092415e-27,4.7961566659114944e-27,0.08771057579944491,1.725247064701418e-27,7.943364762970556e-28,2.2825283283998674e-27,7.21962007061857e-28,1.5143201997878558e-27,2.9172042405554286e-27,0.4804125070128401,8.421295776756486e-27,6.524142423359271e-28,3.711420788575362e-27,5.637628475840829e-28]
# 1 - 441, 523
# arrayTableTRF2 = [1.261421343738713e-27,0.07827206745550826,1.464142324576452e-27,2.0659403972446695e-27,8.02378905814527e-28,3.2457833070046107e-28,1.696272513311305e-28,1.2061435603798406e-28,2.3054412707704943e-28,1.5577608967633018e-28,8.163833884773246e-28,2.2719780996163874e-28,8.628954679303348e-36,2.5250158900964493e-28,8.726674346278849e-28,4.055175235484971e-28,2.7706232500846855e-28,3.0723513744334123e-28,8.464143974451446e-31,0.14557181763480184,4.6519041643312264e-27,1.2895706399972098e-27,9.561423343325753e-28,1.689604103622515e-27,3.1287470387654954e-27,7.762219183476507e-29,0.048324289922225934,1.325977800662336e-27,1.8952688427280244e-28,6.59967966565773e-29,2.902789452618034e-28,1.683690593579053e-26,2.0917658880202224e-28,0.0529464218235719,7.063387734835059e-28,7.300603953707648e-28,0.6546599021760469,1.994475863492763e-27,9.927255957946431e-27,6.781660367585748e-27,1.352583514950974e-25,1.124849563256777e-28,3.0341681478426004e-27,0.465962424334608,4.533833163886661e-27,2.7417134645144986e-27,3.0506815015577682e-27,5.905577240030495e-27,1.1067347736108235e-27,7.950230507737586e-28,0.04910660582346818,7.962231617454061e-28,4.3554471762339315e-27]

# array2 = transformMultisUnityToTroffer(arrayBlackboard2)

# array2 = transformMultisUnityToTroffer(arraySetForget2)

# array2 = transformMultisUnityToTroffer(arrayWestWall2)

# array2 = transformMultisUnityToTroffer(arrayTable2)

array2 = transformMultisUnityToTroffer(arrayTableTRF2)

array2.insert(0, smoother)

# print(array2)

# Send the array to Arduino as a string
# tn1Right.write(str(array1).encode('utf-8'))
# tn1Left.write(str(array1).encode('utf-8'))
tn2Right.write(str(array2).encode('utf-8'))
tn2Left.write(str(array2).encode('utf-8'))

# print(tn2Right.read_all()) # Read all the data from the Telnet server

end_time = time.perf_counter()  # Record the end time

# Closing all the connections
# tn1Right.close()
# tn1Left.close()
tn2Right.close()
tn2Left.close()

# Calculate the elapsed time in milliseconds
elapsed_time = (end_time - start_time) * 1000

# Print the elapsed time in milliseconds
print("Elapsed time: {:.2f} milliseconds".format(elapsed_time))
